name = "neural-coding-api"
main = "src/index.ts"
compatibility_date = "2026-02-01"

# Enable Node.js compatibility for certain APIs
compatibility_flags = ["nodejs_compat_v2"]

# ============================================================================
# Environment Variables (non-sensitive)
# ============================================================================
[vars]
OPENAI_MODEL = "gpt-4o-mini"
OPENAI_IMAGE_MODEL = "gpt-image-1"
ARXIV_QUERY = "cat:q-bio.NC OR cat:cs.NE"
RATE_LIMIT_REQUESTS = "60"
RATE_LIMIT_WINDOW_SECONDS = "60"
CACHE_TTL_SECONDS = "300"
LOG_LEVEL = "info"

# ============================================================================
# D1 Database Binding
# ============================================================================
[[d1_databases]]
binding = "DB"
database_name = "neural_coding_prod"
database_id = "YOUR_D1_DATABASE_ID"  # Run: wrangler d1 create neural_coding_prod

# ============================================================================
# R2 Bucket Binding
# ============================================================================
[[r2_buckets]]
binding = "ASSETS"
bucket_name = "neural-coding-assets"

# ============================================================================
# Cron Triggers
# ============================================================================
[triggers]
crons = ["0 */6 * * *"]

# ============================================================================
# Observability
# ============================================================================
[observability]
enabled = true

[observability.logs]
enabled = true
invocation_logs = true
